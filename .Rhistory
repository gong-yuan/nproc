temp = as.numeric(temp)
assign(ta[[1]][1],temp)
cat("assigned ",ta[[1]][1]," the value of |",temp,"|\n")
}
}
.libPaths('../rpackages')
library(nproc)
nlist = c(100,200,300)
n.num = length(nlist)
model = 1
p = 400
rho = 0.5
n.test = 10000
beta = genbeta(model)
errormat = matrix(0,2,n.num)
for(i in 1:length(n.num)){
n = nlist[i]
set.seed(randSeed)
x1 = genmnorm(n=n,p=p,rho=rho,beta = beta)
x2 = genmnorm(n=n,p=p,rho=rho,beta = 0)
x = rbind(x1,x2)
y = c(rep(0,n),rep(1,n))
set.seed(0)
x1 = genmnorm(n=n.test,p=p,rho=rho,beta = beta)
x2 = genmnorm(n=n.test,p=p,rho=rho,beta = 0)
xtest = rbind(x1,x2)
ytest = c(rep(0,n.test),rep(1,n.test))
fit  = npc(x, y, method = 'slda',alpha=0.1)
pred = predict(fit,xtest)
yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[1,i] = typeI
errormat[2,i] = typeII
fit  = npc(x, y, method = 'slda',alpha=0.1, split.ratio = 'adaptive' )
pred = predict(fit,xtest)
#yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[3,i] = typeI
errormat[4,i] = typeII
}
file = paste0('results/lda_',randSeed,'.RData')
save(errormat, file = file)
model = 1
p = 400
rho = 0.5
n.test = 10000
alpha = 0.1
beta = genbeta(model)
errormat = matrix(0,4,n.num)
for(i in 1:length(n.num)){
n = nlist[i]
set.seed(randSeed)
x1 = genmnorm(n=n,p=p,rho=rho,beta = beta)
x2 = genmnorm(n=n,p=p,rho=rho,beta = 0)
x = rbind(x1,x2)
y = c(rep(0,n),rep(1,n))
set.seed(0)
x1 = genmnorm(n=n.test,p=p,rho=rho,beta = beta)
x2 = genmnorm(n=n.test,p=p,rho=rho,beta = 0)
xtest = rbind(x1,x2)
ytest = c(rep(0,n.test),rep(1,n.test))
fit  = npc(x, y, method = 'slda',alpha=alpha)
pred = predict(fit,xtest)
yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[1,i] = typeI
errormat[2,i] = typeII
fit  = npc(x, y, method = 'slda',alpha=alpha, split.ratio = 'adaptive' )
pred = predict(fit,xtest)
#yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[3,i] = typeI
errormat[4,i] = typeII
}
file = paste0('results/lda_',randSeed,'.RData')
save(errormat, file = file)
errormat
nlist
i
n.num
i
for(i in 1:length(n.num)){
n = nlist[i]
cat('n=',n,'\n')
set.seed(randSeed)
x1 = genmnorm(n=n,p=p,rho=rho,beta = beta)
x2 = genmnorm(n=n,p=p,rho=rho,beta = 0)
x = rbind(x1,x2)
y = c(rep(0,n),rep(1,n))
set.seed(0)
x1 = genmnorm(n=n.test,p=p,rho=rho,beta = beta)
x2 = genmnorm(n=n.test,p=p,rho=rho,beta = 0)
xtest = rbind(x1,x2)
ytest = c(rep(0,n.test),rep(1,n.test))
fit  = npc(x, y, method = 'slda',alpha=alpha)
pred = predict(fit,xtest)
yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[1,i] = typeI
errormat[2,i] = typeII
fit  = npc(x, y, method = 'slda',alpha=alpha, split.ratio = 'adaptive' )
pred = predict(fit,xtest)
#yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[3,i] = typeI
errormat[4,i] = typeII
}
model = 1
p = 400
rho = 0.5
n.test = 10000
alpha = 0.1
beta = genbeta(model)
errormat = matrix(0,4,n.num)
for(i in 1:n.num){
n = nlist[i]
cat('n=',n,'\n')
set.seed(randSeed)
x1 = genmnorm(n=n,p=p,rho=rho,beta = beta)
x2 = genmnorm(n=n,p=p,rho=rho,beta = 0)
x = rbind(x1,x2)
y = c(rep(0,n),rep(1,n))
set.seed(0)
x1 = genmnorm(n=n.test,p=p,rho=rho,beta = beta)
x2 = genmnorm(n=n.test,p=p,rho=rho,beta = 0)
xtest = rbind(x1,x2)
ytest = c(rep(0,n.test),rep(1,n.test))
fit  = npc(x, y, method = 'slda',alpha=alpha)
pred = predict(fit,xtest)
yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[1,i] = typeI
errormat[2,i] = typeII
fit  = npc(x, y, method = 'slda',alpha=alpha, split.ratio = 'adaptive' )
pred = predict(fit,xtest)
#yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[3,i] = typeI
errormat[4,i] = typeII
}
file = paste0('results/lda_',randSeed,'.RData')
save(errormat, file = file)
errormat
slda <- function(train.x, train.y, test.x, test.y){
n1 = sum(train.y==1)
n0 = sum(train.y==0)
n = n1 + n0
lda.y = train.y
lda.y[train.y == 0] = -n/n0
lda.y[train.y == 1] = n/n1
fit = cv.glmnet(train.x, lda.y, ...)
test.score = predict(fit$glmnet.fit, newx = test.x, type = "link", s =       fit$lambda.min)
test.score = as.vector(test.score)
pred.y = (test.score>0)
ind0 = which(test.y==0)
typeI = mean(pred.y[ind0]!=test.y[ind0]) #type I error on test set
typeII = mean(pred.y[-ind0]!=test.y[-ind0]) #type I error on test set
c(typeI, typeII)
}
source('funs.R')
fit.slda = slda(x,y,xtest,ytest)
errormat[5:6,i] = fit.slda
library(glmnet)
fit.slda = slda(x,y,xtest,ytest)
errormat[5:6,i] = fit.slda
fit.slda = slda(x,y,xtest,ytest)
errormat[5:6,i] = fit.slda
library(glmnet)
glmnet
library(nproc)
fit.slda = slda(x,y,xtest,ytest)
library(glmnet)
library("nproc", lib.loc="/Library/Frameworks/R.framework/Versions/3.3/Resources/library")
detach("package:nproc", unload=TRUE)
nproc
library(glmnet)
library(nproc)
fit.slda = slda(x,y,xtest,ytest)
errormat[5:6,i] = fit.slda
slda
source('funs.R')
fit.slda = slda(x,y,xtest,ytest)
errormat[5:6,i] = fit.slda
debug(slda)
fit.slda = slda(x,y,xtest,ytest)
errormat[5:6,i] = fit.slda
pred.y
length(pred.y)
length(test.y)
typI
typeI
typeII
fit.slda
errormat[5:6,i]
model = 1
p = 400
rho = 0.5
n.test = 10000
alpha = 0.1
beta = genbeta(model)
errormat = matrix(0,6,n.num)
for(i in 1:n.num){
n = nlist[i]
cat('n=',n,'\n')
set.seed(randSeed)
x1 = genmnorm(n=n,p=p,rho=rho,beta = beta)
x2 = genmnorm(n=n,p=p,rho=rho,beta = 0)
x = rbind(x1,x2)
y = c(rep(0,n),rep(1,n))
set.seed(0)
x1 = genmnorm(n=n.test,p=p,rho=rho,beta = beta)
x2 = genmnorm(n=n.test,p=p,rho=rho,beta = 0)
xtest = rbind(x1,x2)
ytest = c(rep(0,n.test),rep(1,n.test))
fit  = npc(x, y, method = 'slda',alpha=alpha)
pred = predict(fit,xtest)
yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[1,i] = typeI
errormat[2,i] = typeII
fit  = npc(x, y, method = 'slda',alpha=alpha, split.ratio = 'adaptive' )
pred = predict(fit,xtest)
#yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[3,i] = typeI
errormat[4,i] = typeII
fit.slda = slda(x,y,xtest,ytest)
errormat[5:6,i] = fit.slda
}
undebug(slda)
model = 1
p = 400
rho = 0.5
n.test = 10000
alpha = 0.1
beta = genbeta(model)
errormat = matrix(0,6,n.num)
for(i in 1:n.num){
n = nlist[i]
cat('n=',n,'\n')
set.seed(randSeed)
x1 = genmnorm(n=n,p=p,rho=rho,beta = beta)
x2 = genmnorm(n=n,p=p,rho=rho,beta = 0)
x = rbind(x1,x2)
y = c(rep(0,n),rep(1,n))
set.seed(0)
x1 = genmnorm(n=n.test,p=p,rho=rho,beta = beta)
x2 = genmnorm(n=n.test,p=p,rho=rho,beta = 0)
xtest = rbind(x1,x2)
ytest = c(rep(0,n.test),rep(1,n.test))
fit  = npc(x, y, method = 'slda',alpha=alpha)
pred = predict(fit,xtest)
yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[1,i] = typeI
errormat[2,i] = typeII
fit  = npc(x, y, method = 'slda',alpha=alpha, split.ratio = 'adaptive' )
pred = predict(fit,xtest)
#yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[3,i] = typeI
errormat[4,i] = typeII
fit.slda = slda(x,y,xtest,ytest)
errormat[5:6,i] = fit.slda
}
errormat
file = paste0('results/lda_',randSeed,'.RData')
save(errormat, file = file)
for (e in commandArgs(TRUE)) {
ta = strsplit(e,"=",fixed=TRUE)
if(! is.na(ta[[1]][2])) {
temp = ta[[1]][2]
temp = as.numeric(temp)
assign(ta[[1]][1],temp)
cat("assigned ",ta[[1]][1]," the value of |",temp,"|\n")
}
}
.libPaths('../rpackages')
library(glmnet)
library(nproc)
source('funs.R')
nlist = c(100,200,300)
n.num = length(nlist)
model = 1
p = 400
rho = 0.5
n.test = 10000
alpha = 0.1
beta = genbeta(model)
errormat = matrix(0,6,n.num)
for(i in 1:n.num){
n = nlist[i]
cat('n=',n,'\n')
set.seed(randSeed)
x1 = genmnorm(n=n,p=p,rho=rho,beta = beta)
x2 = genmnorm(n=n,p=p,rho=rho,beta = 0)
x = rbind(x1,x2)
y = c(rep(0,n),rep(1,n))
set.seed(0)
x1 = genmnorm(n=n.test,p=p,rho=rho,beta = beta)
x2 = genmnorm(n=n.test,p=p,rho=rho,beta = 0)
xtest = rbind(x1,x2)
ytest = c(rep(0,n.test),rep(1,n.test))
fit  = npc(x, y, method = 'slda',alpha=alpha)
pred = predict(fit,xtest)
yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[1,i] = typeI
errormat[2,i] = typeII
fit  = npc(x, y, method = 'slda',alpha=alpha, split.ratio = 'adaptive' )
pred = predict(fit,xtest)
#yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[3,i] = typeI
errormat[4,i] = typeII
fit  = npc(x, y, method = 'penlog',alpha=alpha)
pred = predict(fit,xtest)
yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[5,i] = typeI
errormat[6,i] = typeII
fit.slda = slda(x,y,xtest,ytest)
errormat[7:8,i] = fit.slda
}
file = paste0('results/lda_',randSeed,'.RData')
save(errormat, file = file)
library(nproc)
setwd("~/Dropbox/Projects/np-lda-simu")
library(glmnet)
library(nproc)
source('funs.R')
nlist = c(100,200,300)
n.num = length(nlist)
model = 1
p = 400
rho = 0.5
n.test = 10000
alpha = 0.1
beta = genbeta(model)
errormat = matrix(0,10,n.num)
for(i in 1:n.num){
n = nlist[i]
cat('n=',n,'\n')
set.seed(randSeed)
trdata = genlogi(n=n,p=p,rho=rho,beta = beta)
x = trdata$x
y = trdata$y
set.seed(0)
tedata = genlogi(n=n.test,p=p,rho=rho,beta = beta)
xtest = tedata$x
ytest = tedata$y
fit  = npc(x, y, method = 'slda',alpha=alpha)
pred = predict(fit,xtest)
yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[1,i] = typeI
errormat[2,i] = typeII
fit  = npc(x, y, method = 'slda',alpha=alpha, split.ratio = 'adaptive' )
pred = predict(fit,xtest)
#yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[3,i] = typeI
errormat[4,i] = typeII
fit  = npc(x, y, method = 'penlog',alpha=alpha)
pred = predict(fit,xtest)
yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[5,i] = typeI
errormat[6,i] = typeII
fit  = npc(x, y, method = 'penlog',alpha=alpha, split.ratio = 'adaptive')
pred = predict(fit,xtest)
yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[7,i] = typeI
errormat[8,i] = typeII
fit.slda = slda(x,y,xtest,ytest)
errormat[9:10,i] = fit.slda
}
randSeed=1
for(i in 1:n.num){
n = nlist[i]
cat('n=',n,'\n')
set.seed(randSeed)
trdata = genlogi(n=n,p=p,rho=rho,beta = beta)
x = trdata$x
y = trdata$y
set.seed(0)
tedata = genlogi(n=n.test,p=p,rho=rho,beta = beta)
xtest = tedata$x
ytest = tedata$y
fit  = npc(x, y, method = 'slda',alpha=alpha)
pred = predict(fit,xtest)
yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[1,i] = typeI
errormat[2,i] = typeII
fit  = npc(x, y, method = 'slda',alpha=alpha, split.ratio = 'adaptive' )
pred = predict(fit,xtest)
#yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[3,i] = typeI
errormat[4,i] = typeII
fit  = npc(x, y, method = 'penlog',alpha=alpha)
pred = predict(fit,xtest)
yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[5,i] = typeI
errormat[6,i] = typeII
fit  = npc(x, y, method = 'penlog',alpha=alpha, split.ratio = 'adaptive')
pred = predict(fit,xtest)
yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[7,i] = typeI
errormat[8,i] = typeII
fit.slda = slda(x,y,xtest,ytest)
errormat[9:10,i] = fit.slda
}
warnings()
nlist = 2*nlist
for(i in 1:n.num){
n = nlist[i]
cat('n=',n,'\n')
set.seed(randSeed)
trdata = genlogi(n=n,p=p,rho=rho,beta = beta)
x = trdata$x
y = trdata$y
set.seed(0)
tedata = genlogi(n=n.test,p=p,rho=rho,beta = beta)
xtest = tedata$x
ytest = tedata$y
fit  = npc(x, y, method = 'slda',alpha=alpha)
pred = predict(fit,xtest)
yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[1,i] = typeI
errormat[2,i] = typeII
fit  = npc(x, y, method = 'slda',alpha=alpha, split.ratio = 'adaptive' )
pred = predict(fit,xtest)
#yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[3,i] = typeI
errormat[4,i] = typeII
fit  = npc(x, y, method = 'penlog',alpha=alpha)
pred = predict(fit,xtest)
yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[5,i] = typeI
errormat[6,i] = typeII
fit  = npc(x, y, method = 'penlog',alpha=alpha, split.ratio = 'adaptive')
pred = predict(fit,xtest)
yfit = predict(fit, x)
ind0 = which(ytest==0)
typeI = mean(pred$pred.label[ind0]!=ytest[ind0]) #type I error on test set
typeII = mean(pred$pred.label[-ind0]!=ytest[-ind0]) #type I error on test set
errormat[7,i] = typeI
errormat[8,i] = typeII
fit.slda = slda(x,y,xtest,ytest)
errormat[9:10,i] = fit.slda
}
errormat
